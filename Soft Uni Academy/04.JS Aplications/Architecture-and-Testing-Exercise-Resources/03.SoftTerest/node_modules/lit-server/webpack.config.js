const path = require('path');
const CopyWebpackPlugin = require('copy-webpack-plugin');
const { cwd } = require('process');
const resolve = dir => path.resolve(cwd(), dir);

module.exports = {
    mode: "production",
    entry: {
        'webpack-dev-server': path.resolve(__dirname, 'webpack-dev-server.js')
    },
    output: {
        path: resolve('dist'),
        clean: true,
    },
    plugins: [
        new CopyWebpackPlugin({
            patterns: [
                {
                    from: resolve(''),
                    to: resolve('dist'),
                    globOptions: {
                        dot: true,
                        gitignore: true,
                        ignore: ['**/node_modules'],
                    },
                }
            ]
        })
    ],
    devServer: {
        static: cwd()
    },
};